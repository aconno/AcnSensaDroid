apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-android-extensions'
apply plugin: 'kotlin-kapt'
apply plugin: 'io.fabric'

android {
    def globalConfiguration = rootProject.extensions.getByName("ext")

    compileSdkVersion globalConfiguration["androidCompileSdkVersion"]
    buildToolsVersion globalConfiguration["androidBuildToolsVersion"]
    defaultConfig {
        applicationId "com.aconno.sensorics"
        manifestPlaceholders = [fabricAPIKey: sensorics_fabricKey]
        minSdkVersion globalConfiguration["androidMinSdkVersion"]
        targetSdkVersion globalConfiguration["androidTargetSdkVersion"]
        versionCode globalConfiguration["sensoricsVersionCode"]
        versionName globalConfiguration["sensoricsVersionName"]
        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
        multiDexEnabled true
        flavorDimensions "version"
    }
    buildTypes {

        debug {
            applicationVariants.all { variant ->
                variant.outputs.all {
                    outputFileName = "sensorics-${defaultConfig.versionName}-${variant.buildType.name}.apk"
                }
            }
        }

        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    lintOptions {
        checkReleaseBuilds false
    }

    productFlavors {
        dev {
            dimension "version"
            applicationIdSuffix ".dev"
            versionNameSuffix "-dev"
        }
        prod {
            dimension "version"
        }
    }
}
dependencies {
    def presentationDependencies = rootProject.ext.presentationDependencies
    def presentationTestDependencies = rootProject.ext.presentationTestDependencies
    def developmentDependencies = rootProject.ext.developmentDependencies
    def releaseDependencies = rootProject.ext.releaseDependencies

    implementation project(':domain')
    implementation project(':device')
    implementation project(':data')

    implementation fileTree(dir: 'libs', include: ['*.jar'])
    implementation presentationDependencies.kotlin
    implementation presentationDependencies.appCompatv7
    implementation presentationDependencies.cardviewv7
    implementation presentationDependencies.design
    implementation presentationDependencies.recyclerviewv7
    implementation presentationDependencies.supportv4
    implementation presentationDependencies.constraintLay
    kapt presentationDependencies.daggerCompiler
    implementation presentationDependencies.dagger
    implementation presentationDependencies.timber
    implementation presentationDependencies.rxAndroid
    implementation presentationDependencies.rxkotlin
    implementation presentationDependencies.mpAndroidChart
    implementation presentationDependencies.lifeCycleExt
    implementation presentationDependencies.roomRuntime
    kapt presentationDependencies.roomCompile
    implementation presentationDependencies.roomRxJava2
    implementation presentationDependencies.flexbox
    implementation presentationDependencies.gson
    implementation(presentationDependencies.crashlytics) {
        transitive = true
    }

    debugImplementation developmentDependencies.leakCanary
    releaseImplementation releaseDependencies.leakCanary

    testImplementation presentationTestDependencies.kotlinJUnit
    testImplementation presentationTestDependencies.junit

    androidTestImplementation presentationTestDependencies.mockito
    androidTestImplementation presentationTestDependencies.espresso
    androidTestImplementation presentationTestDependencies.testingSupportLib
    androidTestImplementation presentationTestDependencies.testRunner
}

repositories {
    maven { url 'https://jitpack.io' }
    maven { url 'https://maven.fabric.io/public' }
}
